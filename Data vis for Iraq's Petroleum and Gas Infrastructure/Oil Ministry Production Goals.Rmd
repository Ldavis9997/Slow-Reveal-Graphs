---
title: "Oil Ministry Production Goals"
author: "Lauryn Davis"
date: "7/25/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggtext)
library(ggrepel)
```

```{r, fig.height= 4, fig.width= 7}
type_levels= c("Unidiscovered fields", "Undeveloped discovered fields", "Improved production from existing fields", "Unimproved existing fields")

year_levels= c("01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20")
colors= c('#85b838', '#d9361c', '#e2e02a', '#0c0202')
x_label<- c("2001", "02", "03", "04", "05", "06", "07", "08", "09", "2010", "11", "12", "13", "14", "15", "16", "17", "18", "19", "2020")



data<- tibble(
  iraq_type= rep(type_levels, 20),
  iraq_year= rep(year_levels, c(4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4)),
  amount= c(0,.5,2.8,0,0,.5,2.8,0,.3,1,2.5,0,.8,1.3,2.2,0,1.4,1.7,1.8,0,1.9,1.75,1.75,0,2.1,1.8,1.7,0,2.5,1.85,1.65,0,2.5,1.9,1.6,0,2.5,2,1.5,0,2.5,2.05,1.45,0,2.5,2.15,1.35,0,2.57,2.14,1.26,0,2.6,2.2,1.2,0,2.45,2.15,1.15,.2,2.4,2.13,1.1,.35,2.3,2.11,1.09,.5,2.5,2.1,1,.4,2.33,2.21,.89,.54,2.3,2.16,.84,.7
),
fill = rep(colors, 20))


labels <- tibble(
  iraq_type = factor(type_levels, levels = type_levels))
labels <- data %>% 
  mutate(iraq_type = factor(iraq_type, levels = type_levels),
         iraq_year= factor(iraq_year, levels = year_levels),
         fill = factor(fill, levels = colors))

initial<- (ggplot(data, aes(x= iraq_year, 
                             y= amount,
                             fill=fill,
                            label= "")) +
              geom_col(color= "black", size= .2, width= .5) +
             geom_text(size = 4, position = position_stack(vjust = 0.5)))+ 
  scale_x_discrete(labels= x_label, expand=expansion(mult=c(0,0)))+ 
  scale_y_continuous(breaks = c(0,1,2,3,4,5,6), limits= c(0,6), expand= expansion(mult=c(0,.2)))+ scale_fill_manual(labels= type_levels, values= c('#0c0202', '#e2e02a','#d9361c', '#85b838'), name = "")+
  theme_classic()+
  theme(legend.position= "none",
        axis.title = element_blank(),
        axis.ticks= element_blank(),
        axis.line.y= element_blank(),
        panel.grid.major.x= element_blank(),
        panel.grid.minor.x= element_blank(),
        panel.grid.major.y= element_line(color="black", size=.15),
        panel.grid.minor.y= element_blank(),
        plot.margin= unit(c(.5,2,.5,.5), "cm"),
        plot.caption= element_markdown(hjust= 0)
        ) +
  labs(caption= "<p><span style = 'font-size:8pt; color:#000000'><sup>a</sup>Adapted from published oil ministry plans (assumes no sanctions constraints).</p></span>")
  
initial 
```

